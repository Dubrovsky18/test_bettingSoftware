# Ansible Static Server Deployment

–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ —Å—Ç–∞—Ç–∏–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Ansible –∏ Docker.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ Dockerfile                          # Docker –æ–±—Ä–∞–∑ —Å Ubuntu 24.04
‚îú‚îÄ‚îÄ docker-compose.yml                  # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ site.yml                           # –û—Å–Ω–æ–≤–Ω–æ–π Ansible –ø–ª–µ–π–±—É–∫
‚îú‚îÄ‚îÄ ansible.cfg                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Ansible
‚îú‚îÄ‚îÄ inventory/hosts                    # Inventory —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ vars/main.yml                      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–ª–µ–π–±—É–∫–∞
‚îú‚îÄ‚îÄ roles/                            # Ansible —Ä–æ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ users/                        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏/–≥—Ä—É–ø–ø–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ zsh/                          # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ zsh/oh-my-zsh
‚îÇ   ‚îú‚îÄ‚îÄ ssh/                          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH
‚îÇ   ‚îú‚îÄ‚îÄ packages/                     # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ nginx/                        # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ nginx
‚îÇ   ‚îî‚îÄ‚îÄ static/                       # –ó–∞–ª–∏–≤–∫–∞ —Å—Ç–∞—Ç–∏–∫–∏
‚îú‚îÄ‚îÄ ansible_key                       # –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á
‚îî‚îÄ‚îÄ  ansible_key.pub                   # –ü—É–±–ª–∏—á–Ω—ã–π SSH –∫–ª—é—á
```

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–æ–ª–∏

### 1. –†–æ–ª—å `users`
- –°–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥—Ä—É–ø–ø
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–µ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–æ–ª–µ–π –∏ –æ–±–æ–ª–æ—á–µ–∫

### 2. –†–æ–ª—å `zsh`
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ zsh –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ oh-my-zsh
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º –∏ –ø–ª–∞–≥–∏–Ω–æ–≤

### 3. –†–æ–ª—å `ssh`
- –ó–∞–ø—Ä–µ—Ç –≤—Ö–æ–¥–∞ root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ó–∞–ø—Ä–µ—Ç –ø—É—Å—Ç—ã—Ö –ø–∞—Ä–æ–ª–µ–π
- –í–∫–ª—é—á–µ–Ω–∏–µ VERBOSE –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ X11Forwarding

### 4. –†–æ–ª—å `packages`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç (htop, ncdu, git, nano)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ nginx

### 5. –†–æ–ª—å `nginx`
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ nginx
- –°–æ–∑–¥–∞–Ω–∏–µ vhost –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ gzip —Å–∂–∞—Ç–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (1 —á–∞—Å)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

### 6. –†–æ–ª—å `static`
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
docker-compose up --build -d
```

## –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ Ansible
```bash
ansible-playbook site.yml
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤**: http://localhost/images/
- **–û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã**: http://localhost/images/filename
- **–ü—Ä–∏–º–µ—Ä**: http://localhost/images/31638.svg

## –ì–æ—Ç–æ–≤–æ! üéâ

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (vars/main.yml)
```yaml
users_list:
  - name: newuser
    shell: /bin/bash
    state: present
    ssh_key: "ssh-rsa AAAAB3NzaC1yc2E..."
    groups: ["sudo", "developers"]
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
```yaml
packages_list:
  - htop
  - ncdu
  - git
  - nano
  - tree
  - vim
```

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
docker-compose down
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- SSH –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Root –ª–æ–≥–∏–Ω –æ—Ç–∫–ª—é—á–µ–Ω
- –ü–∞—Ä–æ–ª–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ SSH –∫–ª—é—á–∞–º
- Nginx —Å –±–∞–∑–æ–≤—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

